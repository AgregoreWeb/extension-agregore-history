<!DOCTYPE html>
<meta charset="utf-8">
<title>Agregore History Viewer</title>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">

<style>
    @import url("agregore://theme/style.css");

    #searchForm {
        display: flex;
    }

    #searchInput {
        flex: 1;
    }

    .history-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        margin: 1rem 0;
        padding: 0.75rem 1rem;
        border: 1px solid currentColor;
        border-radius: 6px;
        opacity: 0.85;
    }

    .filter-group {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.9rem;
    }

    #timeFilter {
        padding: 0.4rem 0.6rem;
        border: 1px solid currentColor;
        border-radius: 6px;
        background: transparent;
        color: inherit;
    }

    .action-group {
        display: flex;
        gap: 0.75rem;
    }

    .action-btn {
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        border: 1px solid currentColor;
        background: transparent;
        color: inherit;
        cursor: pointer;
    }

    .action-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
</style>

<script src="idb.min.js"></script>
<script src="view.js" type="module"></script>
<H1>History</H1>
<form id="searchForm">
    <input id="searchInput" name="search" type="search" placeholder="agregore docs example" title="Search terms here">
</form>
<hr>
<div class="history-controls">
    <div class="filter-group">
        <label for="timeFilter">Time</label>
        <select id="timeFilter">
            <option value="all">All time</option>
            <option value="day">Last 24 hours</option>
            <option value="week">Last 7 days</option>
            <option value="month">Last 30 days</option>
        </select>
    </div>
    <div class="action-group">
        <button type="button" id="deleteRangeBtn" class="action-btn">Delete Period</button>
        <button type="button" id="deleteAllBtn" class="action-btn">Delete All</button>
    </div>
</div>
<table>
    <thead>
        <tr>
            <th>Actions</th>
            <th>Title</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody id="resultsContainer"></tbody>
</table>
<details>
    <summary>How to search:</summary>
    <p>
        You can search through your history using "fuzzy matching".
    </p>
    <p>
        Don't worry about capitals and just match letters or starts of words with spaces in between.
    </p>
    <p>
        The search is done on latest entries first and will match against the URL + page title.
    </p>
</details>
